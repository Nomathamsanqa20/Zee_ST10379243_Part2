@model IEnumerable<Zee_ST10379243_Part2.Models.Donation>
@{
    ViewData["Title"] = "My Donations";
}

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-donate text-success"></i> My Donations</h2>
        <a asp-action="Create" class="btn btn-success">
            <i class="fas fa-plus"></i> Make New Donation
        </a>
    </div>

    @if (!Model.Any())
    {
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> You haven't made any donations yet.
            <a asp-action="Create" class="alert-link">Make your first donation</a> to help those in need.
        </div>
    }
    else
    {
        <div class="table-responsive shadow-sm">
            <table class="table table-striped table-hover align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Quantity</th>
                        <th>Target Area</th>
                        <th>Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var donation in Model)
                    {
                        <tr>
                            <td>
                                <span class="badge bg-@GetDonationTypeColor(donation.DonationType)">
                                    @donation.DonationType
                                </span>
                            </td>
                            <td>@donation.ItemDescription</td>
                            <td>@donation.Quantity @donation.Unit</td>
                            <td>@donation.TargetArea</td>
                            <td>@donation.DonationDate.ToString("MMM dd, yyyy")</td>
                            <td>
                                <span class="badge bg-@GetStatusColor(donation.Status)">
                                    @donation.Status
                                </span>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }

    <div class="mt-4 text-end">
        <a asp-action="AllDonations" class="btn btn-outline-primary">
            <i class="fas fa-list"></i> View All Donations
        </a>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}

@functions {
    string GetDonationTypeColor(string type)
    {
        return type?.ToLower() switch
        {
            "food" => "warning",
            "clothing" => "info",
            "medical" => "danger",
            "money" => "success",
            _ => "secondary"
        };
    }

    string GetStatusColor(string status)
    {
        return status?.ToLower() switch
        {
            "pending" => "warning",
            "received" => "info",
            "distributed" => "success",
            "cancelled" => "danger",
            _ => "secondary"
        };
    }
}
